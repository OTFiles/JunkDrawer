<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>È´òÁª¥È≠îÊñπ‰∫§‰∫íÂºèÂèØËßÜÂåñÂ∑•ÂÖ∑</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c0f25, #1a1a40);
            color: #e6e6e6;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        header {
            padding: 15px 20px;
            background: rgba(10, 15, 40, 0.9);
            border-bottom: 1px solid rgba(100, 150, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            font-size: 28px;
            color: #64f5ff;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: bold;
            background: linear-gradient(to right, #4facfe, #00f2fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 16px;
            color: #a0b0ff;
        }
        
        .dimension-tag {
            display: inline-block;
            background: rgba(0, 200, 255, 0.15);
            color: #64ffda;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 14px;
            margin: 0 5px;
        }
        
        #main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            padding: 15px;
            gap: 15px;
        }
        
        #canvas-container {
            flex: 1;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0, 100, 255, 0.2);
            background: rgba(5, 10, 30, 0.5);
            border: 1px solid rgba(100, 150, 255, 0.1);
            position: relative;
        }
        
        #ui-container {
            width: 350px;
            display: flex;
            flex-direction: column;
            background: rgba(10, 15, 40, 0.9);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 150, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .ui-header {
            padding: 15px 20px;
            background: rgba(20, 30, 70, 0.6);
            border-bottom: 1px solid rgba(100, 150, 255, 0.15);
        }
        
        .ui-title {
            color: #64f5ff;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .ui-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .control-group {
            background: rgba(20, 30, 70, 0.5);
            padding: 18px;
            border-radius: 10px;
            border: 1px solid rgba(100, 150, 255, 0.15);
        }
        
        .group-title {
            margin-bottom: 16px;
            color: #64f5ff;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-row {
            margin-bottom: 15px;
        }
        
        .row-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .row-title {
            color: #a0b0ff;
            font-weight: 500;
        }
        
        .row-value {
            color: #64ffda;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
            background: linear-gradient(to right, #0072ff, #00c6ff);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #00f2fe;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 242, 254, 0.7);
        }
        
        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        button {
            padding: 12px;
            background: linear-gradient(to right, #0072ff, #00c6ff);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 198, 255, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .preset-btn {
            background: rgba(30, 40, 90, 0.7);
            padding: 10px;
        }
        
        .legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 14px;
            gap: 8px;
        }
        
        .color-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 15px;
            padding: 10px;
            background: rgba(30, 40, 90, 0.5);
            border-radius: 8px;
            border-left: 3px solid #00f2fe;
        }
        
        .indicator-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #4CAF50;
        }
        
        footer {
            padding: 15px 20px;
            text-align: center;
            color: #5d7bff;
            font-size: 14px;
            background: rgba(10, 15, 40, 0.7);
            border-top: 1px solid rgba(100, 150, 255, 0.2);
            flex-shrink: 0;
        }
        
        /* ÊªöÂä®Êù°Ê†∑Âºè */
        .ui-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .ui-content::-webkit-scrollbar-track {
            background: rgba(20, 30, 70, 0.3);
            border-radius: 4px;
        }
        
        .ui-content::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #0072ff, #00c6ff);
            border-radius: 4px;
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 900px) {
            #main-container {
                flex-direction: column;
            }
            
            #canvas-container {
                height: 50vh;
            }
            
            #ui-container {
                width: 100%;
                height: 50vh;
            }
            
            header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">üßä</div>
            <div class="logo-text">È´òÁª¥È≠îÊñπÂèØËßÜÂåñ</div>
        </div>
        <div class="subtitle">Êé¢Á¥¢<span class="dimension-tag">4D</span>Âíå<span class="dimension-tag">5D</span>Ë∂ÖÁ´ãÊñπ‰ΩìÁöÑÁªìÊûÑ</div>
    </header>
    
    <div id="main-container">
        <div id="canvas-container">
            <!-- 3DÊ∏≤ÊüìÂå∫Âüü -->
        </div>
        
        <div id="ui-container">
            <div class="ui-header">
                <div class="ui-title">‚öôÔ∏è ÊéßÂà∂Èù¢Êùø</div>
            </div>
            
            <div class="ui-content">
                <div class="control-group">
                    <div class="group-title">üîß Áª¥Â∫¶ËÆæÁΩÆ</div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">ÂΩìÂâçÁª¥Â∫¶</div>
                            <div class="row-value" id="dim-value">4D</div>
                        </div>
                        <input type="range" id="dimension" min="4" max="5" value="4" step="1">
                    </div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">ÊäïÂΩ±Ê∑±Â∫¶</div>
                            <div class="row-value" id="depth-value">0.5</div>
                        </div>
                        <input type="range" id="depth" min="0.1" max="1" value="0.5" step="0.05">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="group-title">üîÑ È´òÁª¥ÊóãËΩ¨ÊéßÂà∂</div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">XYÂπ≥Èù¢</div>
                            <div class="row-value" id="xy-value">0.0¬∞</div>
                        </div>
                        <input type="range" id="xy-rotation" min="0" max="360" value="0" step="1">
                    </div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">ZWÂπ≥Èù¢</div>
                            <div class="row-value" id="zw-value">0.0¬∞</div>
                        </div>
                        <input type="range" id="zw-rotation" min="0" max="360" value="0" step="1">
                    </div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">XWÂπ≥Èù¢</div>
                            <div class="row-value" id="xw-value">0.0¬∞</div>
                        </div>
                        <input type="range" id="xw-rotation" min="0" max="360" value="0" step="1">
                    </div>
                    
                    <div class="button-group">
                        <button id="reset-rotation-btn">ÈáçÁΩÆÊóãËΩ¨</button>
                        <button id="reset-view-btn">ÈáçÁΩÆËßÜÂõæ</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="group-title">‚ö° Ëá™Âä®ÊóãËΩ¨ËÆæÁΩÆ</div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">XYÊóãËΩ¨ÈÄüÂ∫¶</div>
                            <div class="row-value" id="xy-speed-value">0.5</div>
                        </div>
                        <input type="range" id="xy-speed" min="-2" max="2" value="0.5" step="0.1">
                    </div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">ZWÊóãËΩ¨ÈÄüÂ∫¶</div>
                            <div class="row-value" id="zw-speed-value">0.0</div>
                        </div>
                        <input type="range" id="zw-speed" min="-2" max="2" value="0.0" step="0.1">
                    </div>
                    
                    <div class="control-row">
                        <div class="row-header">
                            <div class="row-title">XWÊóãËΩ¨ÈÄüÂ∫¶</div>
                            <div class="row-value" id="xw-speed-value">0.0</div>
                        </div>
                        <input type="range" id="xw-speed" min="-2" max="2" value="0.0" step="0.1">
                    </div>
                    
                    <div class="button-group">
                        <button id="auto-rotate-btn">ÂêØÂä®Ëá™Âä®ÊóãËΩ¨</button>
                        <button id="complex-rotation-btn">Â§çÊùÇÊ®°Âºè</button>
                    </div>
                    
                    <div class="preset-buttons">
                        <button class="preset-btn" data-preset="basic">Âü∫Á°ÄÊóãËΩ¨</button>
                        <button class="preset-btn" data-preset="double">ÂèåÂπ≥Èù¢ÊóãËΩ¨</button>
                        <button class="preset-btn" data-preset="complex">Â§çÊùÇÊóãËΩ¨</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="group-title">üìä Âõæ‰æãËØ¥Êòé</div>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="color-dot" style="background-color: #FF5252;"></div>
                            <span>X ËΩ¥</span>
                        </div>
                        <div class="legend-item">
                            <div class="color-dot" style="background-color: #4CAF50;"></div>
                            <span>Y ËΩ¥</span>
                        </div>
                        <div class="legend-item">
                            <div class="color-dot" style="background-color: #2196F3;"></div>
                            <span>Z ËΩ¥</span>
                        </div>
                        <div class="legend-item">
                            <div class="color-dot" style="background-color: #FFC107;"></div>
                            <span>W ËΩ¥ (4D)</span>
                        </div>
                        <div class="legend-item">
                            <div class="color-dot" style="background-color: #9C27B0;"></div>
                            <span>V ËΩ¥ (5D)</span>
                        </div>
                    </div>
                    
                    <div class="status-indicator">
                        <div class="indicator-dot"></div>
                        <div>ÂΩìÂâçÁä∂ÊÄÅ: <span id="status-text">ÂáÜÂ§áÂ∞±Áª™</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>È´òÁª¥Á©∫Èó¥ÂèØËßÜÂåñÂ∑•ÂÖ∑ | ‰ΩøÁî®Three.jsÊûÑÂª∫ | Êé¢Á¥¢Êï∞Â≠¶ÁöÑÁª¥Â∫¶‰πãÁæé</p>
    </footer>

    <script>
        // ‰∏ªÁ®ãÂ∫è
        document.addEventListener('DOMContentLoaded', () => {
            // ÂàùÂßãÂåñÂèòÈáè
            let scene, camera, renderer, controls;
            let hypercube = new THREE.Group();
            let autoRotate = false;
            let complexRotation = false;
            let currentDimension = 4;
            let projectionDepth = 0.5;
            
            // ÊóãËΩ¨Áä∂ÊÄÅ
            let rotationState = {
                xy: { angle: 0, speed: 0.5 },
                zw: { angle: 0, speed: 0.0 },
                xw: { angle: 0, speed: 0.0 }
            };
            
            // ÂàùÂßãÂåñÂú∫ÊôØ
            function init() {
                // ÂàõÂª∫Âú∫ÊôØ
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x050a20);
                
                // ÂàõÂª∫Áõ∏Êú∫
                const container = document.getElementById('canvas-container');
                camera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.set(8, 8, 8);
                camera.lookAt(0, 0, 0);
                
                // ÂàõÂª∫Ê∏≤ÊüìÂô®
                renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                renderer.setSize(container.clientWidth, container.clientHeight);
                renderer.setPixelRatio(window.devicePixelRatio);
                container.appendChild(renderer.domElement);
                
                // Ê∑ªÂä†ËΩ®ÈÅìÊéßÂà∂
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;
                controls.rotateSpeed = 0.8;
                
                // Ê∑ªÂä†ÂÖâÊ∫ê
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                scene.add(ambientLight);
                
                const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight1.position.set(1, 1, 1);
                scene.add(directionalLight1);
                
                const directionalLight2 = new THREE.DirectionalLight(0x64b5f6, 0.4);
                directionalLight2.position.set(-1, -1, -1);
                scene.add(directionalLight2);
                
                // ÂàõÂª∫ÂùêÊ†áËΩ¥ËæÖÂä©
                const axesHelper = new THREE.AxesHelper(5);
                scene.add(axesHelper);
                
                // ÂàõÂª∫È´òÁª¥È≠îÊñπ
                createHypercube();
                
                // Ê∑ªÂä†Á™óÂè£Â§ßÂ∞èË∞ÉÊï¥‰∫ã‰ª∂
                window.addEventListener('resize', onWindowResize);
                
                // Ê∑ªÂä†UIÊéßÂà∂‰∫ã‰ª∂
                setupUIControls();
                
                // ÂºÄÂßãÂä®ÁîªÂæ™ÁéØ
                animate();
            }
            
            // ÂàõÂª∫È´òÁª¥È≠îÊñπ
            function createHypercube() {
                // Ê∏ÖÈô§Áé∞ÊúâÁöÑÈ≠îÊñπ
                scene.remove(hypercube);
                hypercube = new THREE.Group();
                hypercube.name = "hypercube";
                
                // ÁîüÊàêÈ°∂ÁÇπ
                const vertices = generateVertices(currentDimension);
                
                // ÂàõÂª∫È°∂ÁÇπÁêÉ‰Ωì
                const sphereGeometry = new THREE.SphereGeometry(0.2, 16, 16);
                
                vertices.forEach(vertex => {
                    // Â∞ÜÈ´òÁª¥ÁÇπÊäïÂΩ±Âà∞3D
                    const projected = projectTo3D(vertex);
                    
                    // Ê†πÊçÆÁª¥Â∫¶ËÆæÁΩÆÈ¢úËâ≤
                    const color = getColorForDimension(vertex);
                    
                    const sphereMaterial = new THREE.MeshPhongMaterial({ 
                        color,
                        emissive: color,
                        emissiveIntensity: 0.2
                    });
                    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
                    sphere.position.set(projected[0], projected[1], projected[2]);
                    
                    // Â≠òÂÇ®ÂéüÂßãÈ´òÁª¥ÂùêÊ†á
                    sphere.userData = { hyperCoords: [...vertex] };
                    hypercube.add(sphere);
                });
                
                // ÂàõÂª∫Ëæπ
                createEdges(vertices);
                
                scene.add(hypercube);
            }
            
            // ÁîüÊàêÈ°∂ÁÇπ
            function generateVertices(dimension) {
                const vertices = [];
                const totalVertices = Math.pow(2, dimension);
                
                for (let i = 0; i < totalVertices; i++) {
                    const vertex = [];
                    for (let d = 0; d < dimension; d++) {
                        // ÁîüÊàê-1Êàñ1ÁöÑÂùêÊ†á
                        const coord = (i & (1 << d)) ? 1 : -1;
                        vertex.push(coord);
                    }
                    vertices.push(vertex);
                }
                
                return vertices;
            }
            
            // ÊäïÂΩ±Âà∞3DÁ©∫Èó¥
            function projectTo3D(vertex) {
                // Áª¥Â∫¶Êò†Â∞Ñ
                let x = vertex[0] || 0;
                let y = vertex[1] || 0;
                let z = vertex[2] || 0;
                
                // Â§ÑÁêÜÊõ¥È´òÁª¥Â∫¶
                if (currentDimension > 3) {
                    const w = vertex[3] || 0;
                    
                    // Â∫îÁî®È´òÁª¥ÊóãËΩ¨
                    const rotated = applyHighDRotation([x, y, z, w]);
                    x = rotated[0];
                    y = rotated[1];
                    z = rotated[2];
                    
                    // ÂØπ‰∫éÊõ¥È´òÁª¥Â∫¶ÔºåÊ∑ªÂä†ÈÄèËßÜÊïàÊûú
                    if (currentDimension > 4) {
                        const v = vertex[4] || 0;
                        // Â∞ÜvÁª¥Â∫¶Êò†Â∞ÑÂà∞Áº©ÊîæÊïàÊûú
                        const scale = 1.0 + v * projectionDepth * 0.5;
                        x *= scale;
                        y *= scale;
                        z *= scale;
                    }
                }
                
                return [x * 3, y * 3, z * 3];
            }
            
            // Â∫îÁî®È´òÁª¥ÊóãËΩ¨
            function applyHighDRotation(vertex) {
                const [x, y, z, w] = vertex;
                
                // Â∫îÁî®XYÂπ≥Èù¢ÊóãËΩ¨
                const xyAngle = rotationState.xy.angle * Math.PI / 180;
                const xyX = x * Math.cos(xyAngle) - y * Math.sin(xyAngle);
                const xyY = x * Math.sin(xyAngle) + y * Math.cos(xyAngle);
                
                // Â∫îÁî®ZWÂπ≥Èù¢ÊóãËΩ¨
                const zwAngle = rotationState.zw.angle * Math.PI / 180;
                const zwZ = z * Math.cos(zwAngle) - w * Math.sin(zwAngle);
                const zwW = z * Math.sin(zwAngle) + w * Math.cos(zwAngle);
                
                // Â∫îÁî®XWÂπ≥Èù¢ÊóãËΩ¨
                const xwAngle = rotationState.xw.angle * Math.PI / 180;
                const xwX = xyX * Math.cos(xwAngle) - zwW * Math.sin(xwAngle);
                const xwW = xyX * Math.sin(xwAngle) + zwW * Math.cos(xwAngle);
                
                return [xwX, xyY, zwZ, xwW];
            }
            
            // ÂàõÂª∫Ëæπ
            function createEdges(vertices) {
                const edgeMaterial = new THREE.LineBasicMaterial({ 
                    color: 0x64b5f6, 
                    transparent: true,
                    opacity: 0.4,
                    linewidth: 1
                });
                
                // ËøûÊé•Áõ∏ÈÇªÁöÑÈ°∂ÁÇπ
                vertices.forEach((v1, i) => {
                    vertices.forEach((v2, j) => {
                        if (i < j) {
                            // Ê£ÄÊü•ÊòØÂê¶Âè™Âú®‰∏Ä‰∏™ÂùêÊ†á‰∏ä‰∏çÂêå
                            let diffCount = 0;
                            for (let d = 0; d < currentDimension; d++) {
                                if (v1[d] !== v2[d]) {
                                    diffCount++;
                                }
                            }
                            
                            if (diffCount === 1) {
                                // ÊäïÂΩ±Âà∞3D
                                const p1 = projectTo3D(v1);
                                const p2 = projectTo3D(v2);
                                
                                const points = [
                                    new THREE.Vector3(p1[0], p1[1], p1[2]),
                                    new THREE.Vector3(p2[0], p2[1], p2[2])
                                ];
                                
                                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                                const line = new THREE.Line(geometry, edgeMaterial);
                                hypercube.add(line);
                            }
                        }
                    });
                });
            }
            
            // Ê†πÊçÆ‰ΩçÁΩÆËé∑ÂèñÈ¢úËâ≤
            function getColorForDimension(vertex) {
                // È¢úËâ≤Êò†Â∞Ñ
                const colors = [
                    0xFF5252, // Á∫¢Ëâ≤ - X
                    0x4CAF50, // ÁªøËâ≤ - Y
                    0x2196F3, // ËìùËâ≤ - Z
                    0xFFC107, // ÈªÑËâ≤ - W
                    0x9C27B0  // Á¥´Ëâ≤ - V
                ];
                
                // ÊâæÂá∫Âì™‰∏™Áª¥Â∫¶ÂÜ≥ÂÆö‰∫ÜËøô‰∏™È°∂ÁÇπÔºàÂü∫‰∫é‰ΩçÁΩÆÔºâ
                for (let d = 0; d < currentDimension; d++) {
                    if (Math.abs(vertex[d]) === 1) {
                        return colors[d % colors.length];
                    }
                }
                
                return 0xffffff; // ÈªòËÆ§ÁôΩËâ≤
            }
            
            // Êõ¥Êñ∞È≠îÊñπ‰ΩçÁΩÆ
            function updateHypercube() {
                if (!hypercube) return;
                
                // ÈÅçÂéÜÊâÄÊúâÂ≠êÂØπË±°
                hypercube.children.forEach(child => {
                    if (child.isMesh && child.userData.hyperCoords) {
                        const projected = projectTo3D(child.userData.hyperCoords);
                        child.position.set(projected[0], projected[1], projected[2]);
                    }
                });
                
                // ÁßªÈô§ÊóßÁöÑËæπ
                const edges = hypercube.children.filter(child => child.isLine);
                edges.forEach(edge => hypercube.remove(edge));
                
                // ÂàõÂª∫Êñ∞ÁöÑËæπ
                createEdges(generateVertices(currentDimension));
            }
            
            // ËÆæÁΩÆUIÊéßÂà∂
            function setupUIControls() {
                // Áª¥Â∫¶ÊéßÂà∂
                const dimensionSlider = document.getElementById('dimension');
                const dimValue = document.getElementById('dim-value');
                
                dimensionSlider.addEventListener('input', () => {
                    currentDimension = parseInt(dimensionSlider.value);
                    dimValue.textContent = currentDimension + 'D';
                    createHypercube();
                    updateStatus("Â∑≤ÂàáÊç¢Âà∞ " + currentDimension + "D È≠îÊñπ");
                });
                
                // ÊäïÂΩ±Ê∑±Â∫¶ÊéßÂà∂
                const depthSlider = document.getElementById('depth');
                const depthValue = document.getElementById('depth-value');
                
                depthSlider.addEventListener('input', () => {
                    projectionDepth = parseFloat(depthSlider.value);
                    depthValue.textContent = projectionDepth.toFixed(2);
                    updateHypercube();
                });
                
                // È´òÁª¥ÊóãËΩ¨ÊéßÂà∂
                const xySlider = document.getElementById('xy-rotation');
                const xyValue = document.getElementById('xy-value');
                
                xySlider.addEventListener('input', () => {
                    rotationState.xy.angle = parseFloat(xySlider.value);
                    xyValue.textContent = rotationState.xy.angle.toFixed(1) + '¬∞';
                    updateHypercube();
                });
                
                const zwSlider = document.getElementById('zw-rotation');
                const zwValue = document.getElementById('zw-value');
                
                zwSlider.addEventListener('input', () => {
                    rotationState.zw.angle = parseFloat(zwSlider.value);
                    zwValue.textContent = rotationState.zw.angle.toFixed(1) + '¬∞';
                    updateHypercube();
                });
                
                const xwSlider = document.getElementById('xw-rotation');
                const xwValue = document.getElementById('xw-value');
                
                xwSlider.addEventListener('input', () => {
                    rotationState.xw.angle = parseFloat(xwSlider.value);
                    xwValue.textContent = rotationState.xw.angle.toFixed(1) + '¬∞';
                    updateHypercube();
                });
                
                // ÊóãËΩ¨ÈÄüÂ∫¶ÊéßÂà∂
                const xySpeedSlider = document.getElementById('xy-speed');
                const xySpeedValue = document.getElementById('xy-speed-value');
                
                xySpeedSlider.addEventListener('input', () => {
                    rotationState.xy.speed = parseFloat(xySpeedSlider.value);
                    xySpeedValue.textContent = rotationState.xy.speed.toFixed(1);
                });
                
                const zwSpeedSlider = document.getElementById('zw-speed');
                const zwSpeedValue = document.getElementById('zw-speed-value');
                
                zwSpeedSlider.addEventListener('input', () => {
                    rotationState.zw.speed = parseFloat(zwSpeedSlider.value);
                    zwSpeedValue.textContent = rotationState.zw.speed.toFixed(1);
                });
                
                const xwSpeedSlider = document.getElementById('xw-speed');
                const xwSpeedValue = document.getElementById('xw-speed-value');
                
                xwSpeedSlider.addEventListener('input', () => {
                    rotationState.xw.speed = parseFloat(xwSpeedSlider.value);
                    xwSpeedValue.textContent = rotationState.xw.speed.toFixed(1);
                });
                
                // Ëá™Âä®ÊóãËΩ¨ÊåâÈíÆ
                document.getElementById('auto-rotate-btn').addEventListener('click', function() {
                    autoRotate = !autoRotate;
                    this.textContent = autoRotate ? 'ÂÅúÊ≠¢Ëá™Âä®ÊóãËΩ¨' : 'ÂêØÂä®Ëá™Âä®ÊóãËΩ¨';
                    updateStatus(autoRotate ? "Ëá™Âä®ÊóãËΩ¨Â∑≤ÂêØÂä®" : "Ëá™Âä®ÊóãËΩ¨Â∑≤ÂÅúÊ≠¢");
                });
                
                // ÈáçÁΩÆÊóãËΩ¨ÊåâÈíÆ
                document.getElementById('reset-rotation-btn').addEventListener('click', () => {
                    rotationState.xy.angle = 0;
                    rotationState.zw.angle = 0;
                    rotationState.xw.angle = 0;
                    
                    xySlider.value = 0;
                    zwSlider.value = 0;
                    xwSlider.value = 0;
                    
                    xyValue.textContent = '0.0¬∞';
                    zwValue.textContent = '0.0¬∞';
                    xwValue.textContent = '0.0¬∞';
                    
                    updateHypercube();
                    updateStatus("ÊóãËΩ¨Â∑≤ÈáçÁΩÆ");
                });
                
                // ÈáçÁΩÆËßÜÂõæÊåâÈíÆ
                document.getElementById('reset-view-btn').addEventListener('click', () => {
                    camera.position.set(8, 8, 8);
                    camera.lookAt(0, 0, 0);
                    controls.reset();
                    updateStatus("ËßÜÂõæÂ∑≤ÈáçÁΩÆ");
                });
                
                // Â§çÊùÇÊóãËΩ¨ÊåâÈíÆ
                document.getElementById('complex-rotation-btn').addEventListener('click', function() {
                    complexRotation = !complexRotation;
                    this.textContent = complexRotation ? 'ÁÆÄÂçïÊ®°Âºè' : 'Â§çÊùÇÊ®°Âºè';
                    updateStatus(complexRotation ? "Â§çÊùÇÊóãËΩ¨Ê®°ÂºèÂ∑≤ÂêØÁî®" : "ÁÆÄÂçïÊóãËΩ¨Ê®°ÂºèÂ∑≤ÂêØÁî®");
                });
                
                // È¢ÑËÆæÊåâÈíÆ
                document.querySelectorAll('.preset-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const preset = this.dataset.preset;
                        applyPreset(preset);
                    });
                });
            }
            
            // Â∫îÁî®È¢ÑËÆæ
            function applyPreset(preset) {
                switch(preset) {
                    case 'basic':
                        rotationState.xy.speed = 0.5;
                        rotationState.zw.speed = 0.0;
                        rotationState.xw.speed = 0.0;
                        break;
                    case 'double':
                        rotationState.xy.speed = 0.5;
                        rotationState.zw.speed = 0.7;
                        rotationState.xw.speed = 0.0;
                        break;
                    case 'complex':
                        rotationState.xy.speed = 0.5;
                        rotationState.zw.speed = 0.7;
                        rotationState.xw.speed = 0.3;
                        complexRotation = true;
                        document.getElementById('complex-rotation-btn').textContent = 'ÁÆÄÂçïÊ®°Âºè';
                        break;
                }
                
                // Êõ¥Êñ∞UI
                document.getElementById('xy-speed').value = rotationState.xy.speed;
                document.getElementById('zw-speed').value = rotationState.zw.speed;
                document.getElementById('xw-speed').value = rotationState.xw.speed;
                
                document.getElementById('xy-speed-value').textContent = rotationState.xy.speed.toFixed(1);
                document.getElementById('zw-speed-value').textContent = rotationState.zw.speed.toFixed(1);
                document.getElementById('xw-speed-value').textContent = rotationState.xw.speed.toFixed(1);
                
                if (!autoRotate) {
                    autoRotate = true;
                    document.getElementById('auto-rotate-btn').textContent = 'ÂÅúÊ≠¢Ëá™Âä®ÊóãËΩ¨';
                }
                
                updateStatus("Â∑≤Â∫îÁî®È¢ÑËÆæ: " + preset);
            }
            
            // Êõ¥Êñ∞Áä∂ÊÄÅ
            function updateStatus(text) {
                document.getElementById('status-text').textContent = text;
            }
            
            // Á™óÂè£Â§ßÂ∞èË∞ÉÊï¥
            function onWindowResize() {
                const container = document.getElementById('canvas-container');
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            }
            
            // Âä®ÁîªÂæ™ÁéØ
            function animate() {
                requestAnimationFrame(animate);
                
                // Ëá™Âä®ÊóãËΩ¨
                if (autoRotate) {
                    rotationState.xy.angle += rotationState.xy.speed;
                    if (complexRotation) {
                        rotationState.zw.angle += rotationState.zw.speed;
                        rotationState.xw.angle += rotationState.xw.speed;
                    }
                    
                    // Êõ¥Êñ∞ÊªëÂùóÊòæÁ§∫
                    document.getElementById('xy-rotation').value = rotationState.xy.angle % 360;
                    document.getElementById('zw-rotation').value = rotationState.zw.angle % 360;
                    document.getElementById('xw-rotation').value = rotationState.xw.angle % 360;
                    
                    document.getElementById('xy-value').textContent = (rotationState.xy.angle % 360).toFixed(1) + '¬∞';
                    document.getElementById('zw-value').textContent = (rotationState.zw.angle % 360).toFixed(1) + '¬∞';
                    document.getElementById('xw-value').textContent = (rotationState.xw.angle % 360).toFixed(1) + '¬∞';
                    
                    updateHypercube();
                }
                
                controls.update();
                renderer.render(scene, camera);
            }
            
            // ÂàùÂßãÂåñÂ∫îÁî®
            init();
            updateStatus("Á≥ªÁªüÂ∑≤Â∞±Áª™ÔºåËØ∑ÂºÄÂßãÊé¢Á¥¢È´òÁª¥Á©∫Èó¥ÔºÅ");
        });
    </script>
</body>
</html>